# ‚úÖ AR System - –í—Å–µ —É–ª—É—á—à–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏ –∞–∫—Ç–∏–≤–Ω—ã!

**–î–∞—Ç–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:** 22 –Ω–æ—è–±—Ä—è 2025  
**–¢–µ–∫—É—â–∏–π –∫–æ–º–º–∏—Ç:** `2ae7c0c` - fix(ar): Center logo perfectly on mobile and desktop  
**–°—Ç–∞—Ç—É—Å:** –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç ‚úÖ

## üéØ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π UI —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º** ‚úÖ
- **–ö–æ–º–º–∏—Ç—ã:** `9de8fd8`, `196b13b`, `86e5e69`, `362be3d`, `fb76e69`, `2ae7c0c`
- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π WebP –ª–æ–≥–æ—Ç–∏–ø PhotoBooks Gallery (`logo_animate1.webp`)
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–º–æ–±–∏–ª—å–Ω—ã–µ + –¥–µ—Å–∫—Ç–æ–ø)
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ—Ç–∏–ø–∞ –≤ –ø–∞–ø–∫—É –∫–∞–∂–¥–æ–≥–æ AR –ø—Ä–æ–µ–∫—Ç–∞
- Graceful fallback –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏

### 2. **iOS Safari Video Fix** ‚úÖ
- **–ö–æ–º–º–∏—Ç:** `7328dce`
- Muted-first —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –æ–±—Ö–æ–¥–∞ iOS autoplay –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π unmute –Ω–∞ Android/Desktop —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
- Tap-to-unmute hint –¥–ª—è iOS —Å –∏–∫–æ–Ω–∫–æ–π üëÜ

### 3. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏** ‚úÖ
- **–ö–æ–º–º–∏—Ç:** `c87ae59`
- üì§ –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" (Share API + clipboard fallback)
- üõí –ö–Ω–æ–ø–∫–∞ "–ó–∞–∫–∞–∑–∞—Ç—å –∞–ª—å–±–æ–º" (–ø–æ—è–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫ –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞ –≤–∏–¥–µ–æ)
- –ö—Ä–∞—Å–∏–≤—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –∏ –∞–Ω–∏–º–∞—Ü–∏—è fadeInUp

### 4. **–ü–ª–∞–≤–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ (Smoothing)** ‚úÖ
- **–ö–æ–º–º–∏—Ç:** `b2629dd`
- –£–≤–µ–ª–∏—á–µ–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è: `0.25 ‚Üí 0.5`
- –ë–æ–ª–µ–µ –æ—Ç–∑—ã–≤—á–∏–≤–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –º–∞—Ä–∫–µ—Ä–∞
- Slerp –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è

### 5. **Auto-Cover Mode –¥–ª—è –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Ñ–æ—Ç–æ** ‚úÖ
- **–ö–æ–º–º–∏—Ç—ã:** `1e7b499`, `af4b517`, `abfaf2e`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ —Ñ–æ—Ç–æ + –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ ‚Üí Cover mode
- –û–±—Ä–µ–∑–∫–∞ –≤–∏–¥–µ–æ –ø–æ–¥ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ —Ñ–æ—Ç–æ (–±–µ–∑ —á–µ—Ä–Ω—ã—Ö –ø–æ–ª–æ—Å)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–π —Å `aspectLocked: true`

### 6. **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ Border Enhancer —Ä–∞–º–∫–∏** ‚úÖ
- **–§–∞–π–ª:** `backend/src/services/border-enhancer.ts`
- Hash-based seed –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –ö–∞–∂–¥–æ–µ —Ñ–æ—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç –£–ù–ò–ö–ê–õ–¨–ù–£–Æ —Ä–∞–º–∫—É —Å 2000-3000+ feature points
- –ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–µ —É–≥–ª—ã (‚óè, ‚ñ≤, ‚ñ†, ‚òÖ, ‚ú¶, ‚óÜ)
- –í–∞—Ä–∏–∞—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞ + —Ç–µ–∫—Å—Ç–æ–≤—ã–π watermark
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ç–æ–ª—â–∏–Ω—ã –¥–æ 12-15% –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ñ–æ—Ç–æ

### 7. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã MindAR** ‚úÖ
- **Single Target:**
  - `filterMinCF: 0.0001` (–≤—ã—Å–æ–∫–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
  - `filterBeta: 0.003` (–ø–ª–∞–≤–Ω–∞—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è)
  - `warmupTolerance: 5` (–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç)
  - `missTolerance: 10` (—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–æ—Ç–µ—Ä–µ)

- **Multi Target:**
  - `filterBeta: 0.01` (–±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è)
  - `warmupTolerance: 3` (–±—ã—Å—Ç—Ä–µ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ)

### 8. **–ö–∞–ª–∏–±—Ä–æ–≤–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Zoom/Offset** ‚úÖ
- **–ö–æ–º–º–∏—Ç:** `2251715`
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å ARViewerConfig —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
  - `zoom`: 0.5-2.0 (–º–∞—Å—à—Ç–∞–± –ø–æ–≤–µ—Ä—Ö –∞–≤—Ç–æ–æ–±—Ä–µ–∑–∫–∏)
  - `offsetX`, `offsetY`: -0.5 –¥–æ +0.5 (—Å–º–µ—â–µ–Ω–∏–µ –≤–∏–¥–µ–æ)
  - `aspectLocked`: true/false (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–ø–æ—Ä—Ü–∏–π)
- JavaScript runtime –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ viewer

### 9. **Square Marker Mode** ‚úÖ
- **–ö–æ–º–º–∏—Ç:** `af4b517`
- –ß–µ–∫–±–æ–∫—Å "–ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º" –¥–ª—è –≤—ã–ø—É—Å–∫–Ω—ã—Ö –∞–ª—å–±–æ–º–æ–≤
- –§–æ—Ä—Å–∏—Ä—É–µ—Ç –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ñ–æ—Ç–æ

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ AR –ø—Ä–æ–µ–∫—Ç–∞

```
backend/objects/ar-storage/{project-id}/
‚îú‚îÄ‚îÄ index.html                    # AR Viewer (–≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∫–ª—é—á–µ–Ω—ã)
‚îú‚îÄ‚îÄ marker.mind                   # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Ä–∫–µ—Ä
‚îú‚îÄ‚îÄ video.mp4                     # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –≤–∏–¥–µ–æ
‚îú‚îÄ‚îÄ logo_animate1.webp           # ‚úÖ –õ–æ–≥–æ—Ç–∏–ø PhotoBooks Gallery
‚îú‚îÄ‚îÄ enhanced-photo.jpg           # ‚úÖ –§–æ—Ç–æ —Å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Ä–∞–º–∫–æ–π (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
‚îî‚îÄ‚îÄ cropped-marker-photo.jpg     # –û–±—Ä–µ–∑–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è AR –ø—Ä–æ–µ–∫—Ç–∞
1. **Border Enhancement** - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Ä–∞–º–∫–∏ (hash-based seed)
2. **Smart Crop** - –û–±—Ä–µ–∑–∫–∞ —Ä–∞–º–∫–∏ –¥–ª—è —á–∏—Å—Ç–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞
3. **MindAR Compilation** - Offline –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –±–µ–∑ Puppeteer
4. **Video Processing** - Cover/Contain —Ä–µ–∂–∏–º –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
5. **HTML Generation** - –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π viewer

### Feature Points
- **–° Border Enhancer:** 2000-3000+ —Ç–æ—á–µ–∫
- **–ë–µ–∑ Border Enhancer:** 200-800 —Ç–æ—á–µ–∫
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ç–∞–±–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞ 0.3-1 —Å–µ–∫—É–Ω–¥—É

## üé¨ Workflow —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç AR link ‚Üí Loading screen —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º
2. –ö–∞–º–µ—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è ‚Üí MindAR –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
3. –ù–∞–≤–æ–¥–∏—Ç –Ω–∞ —Ñ–æ—Ç–æ ‚Üí Marker Found –∑–∞ ~0.5 —Å–µ–∫
4. –í–∏–¥–µ–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (muted-first –¥–ª—è iOS)
5. Plane —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∏–¥–∏–º—ã–º —Å fade-in –∞–Ω–∏–º–∞—Ü–∏–µ–π
6. Auto-unmute —á–µ—Ä–µ–∑ 1 —Å–µ–∫ (–∏–ª–∏ tap-to-unmute –Ω–∞ iOS)
7. –ß–µ—Ä–µ–∑ 5 —Å–µ–∫ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–ó–∞–∫–∞–∑–∞—Ç—å –∞–ª—å–±–æ–º"
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–º–∏—Ç–æ–≤ (—Å 21 –Ω–æ—è–±—Ä—è)

```
2ae7c0c - fix(ar): Center logo perfectly on mobile and desktop
fb76e69 - fix(ar): Correct logo path - use parent directory (..)
362be3d - fix(ar): Use fs-extra for logo copying
86e5e69 - feat(ar): Use custom PhotoBooks Gallery animated logo
196b13b - fix(ar): Copy logo to AR storage and load from relative path
9de8fd8 - feat(ar): Replace Lottie with custom PhotoBooks Gallery WebP logo
1cfa8c8 - feat(ar): Embed Lottie animation inline
4beef88 - feat(ar): Replace loading screen with Lottie logo animation
c87ae59 - feat(ar): Add professional UI elements - logo, share, order buttons
b2629dd - perf(ar): Increase smoothing speed 0.25->0.5
c777567 - feat(ar): Add tap-to-unmute hint for iOS Safari
7328dce - fix(ar): iOS video playback with muted-first strategy
2251715 - feat: Add zoom/offset calibration system
3f98078 - fix: Preserve video aspect ratio under camera perspective
abfaf2e - fix: Apply fitMode cover in AR viewer runtime
af4b517 - feat: Square Marker Mode checkbox
1e7b499 - feat(ar): auto-cover mode + video preview
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –Ω–æ–≤—ã–π —á–∞—Ç –±—ã–ª–∏ –æ–ø–∞—Å–µ–Ω–∏—è –æ –ø–æ—Ç–µ—Ä–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫–∞–∑–∞–ª–∞:
- ‚úÖ –í—Å–µ –∫–æ–º–º–∏—Ç—ã –Ω–∞ –º–µ—Å—Ç–µ
- ‚úÖ –í–µ—Å—å –∫–æ–¥ –∞–∫—Ç—É–∞–ª–µ–Ω
- ‚úÖ Border Enhancer —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —Ä–∞–º–∫–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –õ–æ–≥–æ—Ç–∏–ø WebP –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ iOS video fix –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ UI —ç–ª–µ–º–µ–Ω—Ç—ã (share, order, unmute hint) —Ä–∞–±–æ—Ç–∞—é—Ç

**–í—ã–≤–æ–¥:** –ù–∏—á–µ–≥–æ –Ω–µ –ø–æ—Ç–µ—Ä—è–Ω–æ! –í—Å–µ —É–ª—É—á—à–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã –≤ HEAD –∫–æ–º–º–∏—Ç–µ `2ae7c0c`.

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (iPhone, Android)
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö AR –ø—Ä–æ–µ–∫—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
3. ‚è≥ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ production —Å–µ—Ä–≤–µ—Ä
4. ‚è≥ –°–æ–±—Ä–∞—Ç—å feedback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

**–ê–≤—Ç–æ—Ä:** GitHub Copilot (Claude Sonnet 4.5)  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 22 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** Production Ready ‚úÖ
