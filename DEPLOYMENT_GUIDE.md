# üöÄ –†–£–ö–û–í–û–î–°–¢–í–û –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é PhotoBooksGallery –Ω–∞ BEGET VPS

## üìã –ß–¢–û –£ –ù–ê–° –ì–û–¢–û–í–û:
‚úÖ Production build —Å–æ–∑–¥–∞–Ω (–ø–∞–ø–∫–∞ `/dist/`)
‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è production.env –≥–æ—Ç–æ–≤–∞  
‚úÖ SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
‚úÖ –õ–æ–≥–æ—Ç–∏–ø –¥–æ–±–∞–≤–ª–µ–Ω

## üîß –ß–¢–û –ü–û–ù–ê–î–û–ë–ò–¢–°–Ø –î–õ–Ø –°–ï–†–í–ï–†–ê:

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **Node.js** –≤–µ—Ä—Å–∏–∏ 18+ (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∞–π—Ç–∞)
- **PostgreSQL** (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)  
- **Nginx** (–≤–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–º–µ–Ω–æ–º)
- **PM2** (–¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ —Å–∞–π—Ç–∞)
- **Certbot** (–¥–ª—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞)

### –§–∞–π–ª—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
- `/dist/` - —Å–æ–±—Ä–∞–Ω–Ω—ã–π —Å–∞–π—Ç
- `/server/` - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å  
- `/shared/` - –æ–±—â–∏–µ —Ñ–∞–π–ª—ã
- `/migrations/` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `package.json` - —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- `production.env` ‚Üí –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≤ `.env`

## ü©∫ Health & –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –¥–æ—Å—Ç—É–ø–µ–Ω endpoint `/api/health` (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: —Å—Ç–∞—Ç—É—Å –ë–î, git commit, uptime, –∫–æ–ª-–≤–æ –º–∏–≥—Ä–∞—Ü–∏–π, —Ç–∞–±–ª–∏—Ü).  
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –±–∏–ª–¥–æ–≤: —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–π `deploy-manifest.json` (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```
node scripts/diff-manifests.mjs old-manifest.json deploy-manifest.json
```

Partial deploy (—É—Å–∫–æ—Ä–µ–Ω–Ω—ã–π):
```
ONLY=server bash scripts/deploy-release.sh   # –¢–æ–ª—å–∫–æ backend/–ª–æ–≥–∏–∫–∞
ONLY=public bash scripts/deploy-release.sh   # –¢–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏–∫–∞/–∫–ª–∏–µ–Ω—Ç
ONLY=migrations bash scripts/deploy-release.sh # –¢–æ–ª—å–∫–æ –º–∏–≥—Ä–∞—Ü–∏–∏
ONLY=code bash scripts/deploy-release.sh     # –ö–æ–¥ + dist –±–µ–∑ public –æ—Ç–¥–µ–ª—å–Ω–æ
```

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–µ–Ω** –≤ –ø–∞–Ω–µ–ª–∏ BEGET
2. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ VPS** –ø–æ SSH  
3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –ü–û**
4. **–°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**
5. **–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã —Å–∞–π—Ç–∞**
6. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∞–π—Ç**
7. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç**

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø:

- –í —Ñ–∞–π–ª–µ `production.env` –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å:
  - `SUPER_SECURE_PASSWORD_HERE` ‚Üí –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –ë–î
  - `your-super-secret-session-key` ‚Üí –Ω–∞ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É
  
- –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Ñ–∞–π–ª `production.env` –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≤ `.env`

**–ì–æ—Ç–æ–≤—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –¥–æ–º–µ–Ω–∞ –Ω–∞ BEGET?** üöÄ

---
### üîÑ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –∏ –æ—Ç–∫–∞—Ç—ã (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
–î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—ã–π —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (zero-downtime + rollback):

1. –õ–æ–∫–∞–ª—å–Ω–æ:
  - `npm run build`
  - `node scripts/generate-manifest.mjs`
  - `./scripts/deploy-release.sh`
2. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ä–µ–ª–∏–∑ –∫–ª–∞–¥—ë—Ç—Å—è –≤ `/var/www/photobooksgallery/releases/release-<timestamp>` –∏ –∑–∞—Ç–µ–º —Å–∏–º–ª–∏–Ω–∫ `current` –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è.
3. –û—Ç–∫–∞—Ç: `./scripts/rollback-release.sh`

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. `DEPLOYMENT_ADVANCED.md`.
