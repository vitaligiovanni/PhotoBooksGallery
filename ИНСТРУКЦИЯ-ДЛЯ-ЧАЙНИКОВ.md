# 🎮 ИНСТРУКЦИЯ ДЛЯ ПЯТИКЛАССНИКА
## Как работать с проектом от А до Я

---

## 📖 ОГЛАВЛЕНИЕ (быстрая навигация)

**🚀 БЫСТРЫЙ СТАРТ (если совсем новичок):**
1. [Карта: Где я работаю?](#-карта-где-я-работаю)
2. [Утро: Начало работы](#-утро-начало-работы-каждый-день)
3. [Работа: Изменение кода](#️-работа-изменение-кода-весь-день)

**🧪 ТЕСТИРОВАНИЕ И ИСПРАВЛЕНИЯ:**
4. [Тестирование перед деплоем](#-тестирование-проверка-перед-отправкой-на-сервер)
5. [Возврат к разработке (если что-то не понравилось)](#-возврат-к-разработке-если-что-то-не-понравилось-в-docker)

**🖼 ФАЙЛЫ И КАРТИНКИ:**
6. [Картинки и синхронизация (локаль ↔ сервер)](#-картинки-и-синхронизация-локально--сервер)

**📤 ДЕПЛОЙ НА СЕРВЕР:**
7. [Деплой на сервер](#-деплой-отправка-на-сервер-1-2-раза-в-неделю)

**📋 СПРАВОЧНАЯ ИНФОРМАЦИЯ:**
7. [Таблица переключений (когда что использовать)](#-таблица-переключений-когда-что-использовать)
8. [Частые вопросы](#-частые-вопросы)
9. [Золотые правила](#-золотые-правила-запомни)
10. [Чеклист на стикер](#-чеклист-на-стикер-приклей-на-монитор)
11. [Супер-краткая шпаргалка](#-супер-краткая-шпаргалка-1-страница)

**🆘 ЕСЛИ ЧТО-ТО СЛОМАЛОСЬ:**
12. [Проблемы и решения](#️-если-что-то-сломалось)
13. [Когда звать на помощь](#-когда-звать-на-помощь)
14. [Аварийная остановка](#-аварийная-остановка)

---

## 🗺️ КАРТА: Где я работаю?

```
┌─────────────────────────────────────────────────────────────┐
│                   ТВОЙ КОМПЬЮТЕР                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  📁 VS Code (папка с кодом)                                 │
│     frontend/src/  ← Здесь ты пишешь код                    │
│     backend/src/   ← Здесь тоже                             │
│                                                             │
│  ┌──────────────────────────────────────────────────────┐   │
│  │  🚀 DEV РЕЖИМ (разработка)                          │   │
│  │  Порт: localhost:3000                               │   │
│  │  Что: Быстрые изменения, видны СРАЗУ               │   │
│  │  Когда: 90% времени (каждый день)                   │   │
│  │  Как запустить: 🚀 Запустить DEV                    │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌──────────────────────────────────────────────────────┐   │
│  │  🐳 DOCKER РЕЖИМ (тестирование)                     │   │
│  │  Порт: localhost:8080                               │   │
│  │  Что: Проверка "как на сервере"                     │   │
│  │  Когда: 10% времени (перед деплоем)                 │   │
│  │  Как запустить: 🔨 Собрать + 🐳 Запустить          │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
                              ↓ (деплой)
┌─────────────────────────────────────────────────────────────┐
│                   СЕРВЕР (VPS)                              │
├─────────────────────────────────────────────────────────────┤
│  🌐 PRODUCTION (настоящий сайт)                             │
│  URL: https://photobooksgallery.am                          │
│  Что: Реальный сайт, видят пользователи                     │
│  Когда: 1-2 раза в неделю (после проверки)                  │
│  Как запустить: ssh + git pull + docker compose             │
└─────────────────────────────────────────────────────────────┘
```

### 🎯 ГЛАВНОЕ ПРАВИЛО:
```
Всегда начинай с DEV (localhost:3000)
Проверяй в Docker (localhost:8080)
Деплой на сервер (photobooksgallery.am) только если всё работает!
```

---

## 🌅 УТРО: НАЧАЛО РАБОТЫ (каждый день)

### Шаг 1: Запусти базу данных
```
Найди внизу экрана кнопку: 🗄️ Запустить БД
Нажми на неё
Подожди 3 секунды
✅ Готово!
```

### Шаг 2: Останови старый backend (если он запущен)
```
Найди кнопку: 🛑 Остановить Backend
Нажми на неё
✅ Готово!
```

### Шаг 3: Запусти разработку
```
Найди кнопку: 🚀 Запустить DEV
Нажми на неё
Подожди 10 секунд (пока в терминале не появится "Local: http://localhost:3000")
✅ Готово!
```

### Шаг 4: Открой сайт в браузере
```
Найди кнопку: 🌐 Открыть Local
Нажми на неё
Откроется браузер с сайтом!
✅ Готово!
```

**🎉 ПОЗДРАВЛЯЮ! Теперь можешь работать с кодом!**

### (Опционально) Шаг 5: Подтянуть актуальные картинки с сервера
```
npm run sync:pull

Зачем: забрать свежие изображения товаров/категорий в локальные папки
./backend/objects и ./uploads, чтобы локальный Docker показывал те же
картинки, что и прод.
```

---

## ✏️ РАБОТА: ИЗМЕНЕНИЕ КОДА (весь день)

### Что делать:
1. Открой любой файл в VS Code (например, `frontend/src/pages/Landing.tsx`)
2. Измени что-то (например, текст, цвет)
3. Нажми **Ctrl+S** (сохранить)
4. Посмотри на браузер - **страница сама обновилась!** ✨

### 🎯 ГЛАВНОЕ ПРАВИЛО:
```
Изменил код → Сохранил (Ctrl+S) → Страница обновилась
```

**Никаких других кнопок жать НЕ НУЖНО!** Всё работает автоматически! 🎪

> Картинки и файлы загрузок хранятся не в Git, а в папках
> `./backend/objects` и `./uploads`. Эти папки примонтированы в Docker,
> поэтому файлы не пропадают при пересборке контейнеров.

---

## ⚠️ ЕСЛИ ЧТО-ТО СЛОМАЛОСЬ

### Проблема: "Страница не обновляется"
```
Решение:
1. Посмотри в терминал (внизу VS Code)
2. Если там красный текст (ошибка) - прочитай что написано
3. Исправь ошибку в коде
4. Сохрани (Ctrl+S)
✅ Должно заработать!
```

### Проблема: "Не вижу данные из базы"
```
Решение:
1. Нажми кнопку: 🔍 Проверить БД
2. Если пишет "Подключение успешно" ✅ - всё хорошо
3. Если ошибка ❌ - нажми: 🗄️ Запустить БД (заново)
```

### Проблема: "Порт 5002 занят"
```
Решение:
1. Нажми кнопку: 🛑 Остановить Backend
2. Закрой терминал (крестик)
3. Нажми кнопку: 🚀 Запустить DEV (заново)
✅ Должно заработать!
```

---

## 🧪 ТЕСТИРОВАНИЕ: ПРОВЕРКА ПЕРЕД ОТПРАВКОЙ НА СЕРВЕР

### Когда делать:
- Закончил работать
- Хочешь проверить "как на настоящем сайте"
- Готов отправить на сервер

### Шаг 1: Останови разработку
```
Найди терминал внизу VS Code (где пишет "Local: http://localhost:3000")
Нажми в это окно (чтобы курсор мигал там)
Нажми Ctrl+C на клавиатуре
Подожди пока терминал остановится
✅ Готово!
```

### Шаг 2: Собери Docker (сделай копию кода)
```
Найди кнопку: 🔨 Собрать Docker
Нажми на неё
Подожди 1-2 минуты (в терминале будет много текста - это нормально!)
В конце должно быть: "Successfully built"
✅ Готово!
```

### Шаг 3: Запусти Docker
```
Найди кнопку: 🐳 Запустить Docker
Нажми на неё
Подожди 10 секунд
✅ Готово!
```

### Шаг 4: Открой сайт (но на ДРУГОМ порту!)
```
Открой браузер
Набери адрес: http://localhost:8080
(⚠️ НЕ 3000, а 8080!)
✅ Сайт должен открыться!
```

### Шаг 5: Проверь что всё работает
```
- Нажимай на кнопки
- Открывай страницы
- Добавляй товары в корзину
- Всё работает? → Переходи к ДЕПЛОЮ! 🚀
- Что-то не работает? → Вернись к РАБОТЕ, исправь ошибку

### (Опционально) Шаг 6: Проверить доступность картинок
```
Открой адрес вида:
http://localhost:8080/api/objects/local-upload/ИМЯ_ФАЙЛА
или
http://localhost:8080/objects/local-upload/ИМЯ_ФАЙЛА

Если открывается — всё ок, прокси настроен правильно.
```
```

---

## 🔁 ВОЗВРАТ К РАЗРАБОТКЕ: Если что-то не понравилось в Docker

### Ситуация:
```
Ты проверил сайт на localhost:8080 (Docker)
Что-то не понравилось / нашёл ошибку
Хочешь вернуться к разработке и исправить
```

### ⚠️ ВАЖНО ПОНЯТЬ:
```
Docker = "замороженная копия" кода
Если ты изменишь код сейчас - Docker НЕ УВИДИТ изменений!
Поэтому нужно ОСТАНОВИТЬ Docker и вернуться к DEV
```

### Шаг 1: Останови Docker
```
Открой терминал
Набери:
docker compose down

Подожди 5 секунд
✅ Docker остановлен!
```

### Шаг 2: Запусти разработку снова
```
Найди кнопку: 🚀 Запустить DEV
Нажми на неё
Подожди 10 секунд
✅ DEV запустился!
```

### Шаг 3: Открой сайт
```
Найди кнопку: 🌐 Открыть Local
Нажми на неё
Откроется браузер на localhost:3000
✅ Теперь можешь менять код!
```

### Шаг 4: Исправь что не понравилось
```
1. Измени код в VS Code
2. Сохрани (Ctrl+S)
3. Страница обновится автоматически
4. Проверь что теперь правильно
✅ Исправил!
```

### Шаг 5: Снова протестируй в Docker (когда готов)
```
1. Ctrl+C (останови DEV)
2. 🔨 Собрать Docker (ОБЯЗАТЕЛЬНО! Иначе будет старая версия!)
3. 🐳 Запустить Docker
4. Открой localhost:8080
5. Проверяй снова!
```

### 🎯 СХЕМА ЦИКЛА "РАЗРАБОТКА → ТЕСТ → ИСПРАВЛЕНИЕ":

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│  1. 🚀 Запустить DEV (localhost:3000)                   │
│     ↓                                                   │
│  2. Пишу код, сохраняю (Ctrl+S)                         │
│     ↓                                                   │
│  3. Проверяю в браузере                                 │
│     ↓                                                   │
│  4. Вроде готово? → Тестирую в Docker                   │
│     ↓                                                   │
│  5. Ctrl+C → 🔨 Собрать Docker → 🐳 Запустить          │
│     ↓                                                   │
│  6. Открываю localhost:8080                             │
│     ↓                                                   │
│  7. ✅ Всё хорошо? → Иду к ДЕПЛОЮ                       │
│     ❌ Что-то не так? → Возвращаюсь к шагу 1!          │
│                                                         │
│  Для возврата к шагу 1:                                 │
│  - docker compose down                                  │
│  - 🚀 Запустить DEV                                     │
│  - 🌐 Открыть Local                                     │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 💡 ПОДСКАЗКА: Когда что использовать?

**Используй DEV (localhost:3000) когда:**
- ✏️ Пишешь новый код
- 🐛 Ищешь ошибки
- 🎨 Меняешь дизайн (цвета, размеры)
- 📝 Пишешь тексты
- 🔧 Экспериментируешь

**Используй Docker (localhost:8080) когда:**
- ✅ Готов к деплою
- 🧪 Хочешь проверить "как на сервере"
- 🎯 Финальная проверка перед отправкой

### ⚠️ ТИПИЧНАЯ ОШИБКА:

```
❌ НЕПРАВИЛЬНО:
1. Запустил Docker (localhost:8080)
2. Что-то не понравилось
3. Изменил код в VS Code
4. Сохранил (Ctrl+S)
5. Обновил страницу localhost:8080
6. Ничего не изменилось! Почему?!

Ответ: Docker НЕ ВИДИТ новый код!
Нужно пересобрать: docker compose build

✅ ПРАВИЛЬНО:
1. Запустил Docker (localhost:8080)
2. Что-то не понравилось
3. docker compose down
4. 🚀 Запустить DEV
5. Изменил код
6. Сохранил (Ctrl+S)
7. localhost:3000 обновился автоматически ✅
```

### 📋 БЫСТРАЯ ШПАРГАЛКА:

```
ПЕРЕКЛЮЧЕНИЕ РЕЖИМОВ:

DEV → Docker:
  Ctrl+C → 🔨 Собрать Docker → 🐳 Запустить Docker

Docker → DEV:
  docker compose down → 🚀 Запустить DEV → 🌐 Открыть Local
```

---

## 📤 ДЕПЛОЙ: ОТПРАВКА НА СЕРВЕР (1-2 раза в неделю)

### ⚠️ ВАЖНО! Делай деплой только если:
- ✅ Всё работает локально (проверил в localhost:8080)
- ✅ Ты закончил работу (больше не будешь менять код сегодня)
- ✅ Ты знаешь что именно изменил (чтобы потом вспомнить)

### Шаг 1: Проверь что изменилось
```
Найди кнопку: 💻 Git Status
Нажми на неё
В терминале появится список файлов которые ты изменил
Прочитай их - запомни что менял
✅ Готово!
```

### Шаг 2: Сохрани изменения в Git
```
Открой терминал (Ctrl+Shift+` или кнопка "Terminal" вверху)
Набери команды по очереди:

git add .
git commit -m "Краткое описание что сделал"
git push

Пример описания:
- "Изменил цвет кнопки Купить"
- "Добавил страницу Контакты"
- "Исправил ошибку с корзиной"

✅ Готово! Код сохранён в Git!
```

### Шаг 3: Подключись к серверу
```
Открой терминал
Набери:
ssh root@46.173.29.247

Когда спросит пароль - введи пароль от сервера
Нажми Enter
Терминал изменится - теперь ты на сервере!
✅ Готово!
```

### Шаг 4: Обнови код на сервере
```
В терминале набери команды по очереди:

cd /opt/photobooksgallery
git pull

Это скачает твой новый код на сервер
✅ Готово!
```

### Шаг 5: Пересобери Docker на сервере
```
В терминале набери:

docker compose build

Подожди 2-3 минуты (будет много текста)
✅ Готово!
```

### Шаг 6: Перезапусти сервер
```
В терминале набери:

docker compose up -d

Подожди 10 секунд
✅ Готово!
```

### Шаг 7: Проверь что всё работает
```
В терминале набери:

docker ps

Посмотри на колонку STATUS:
- photobooks_backend  → должно быть "healthy" ✅
- photobooks_frontend → должно быть "Up" ✅
- photobooks_db       → должно быть "healthy" ✅

Всё "healthy" или "Up"? → Идём дальше!
Что-то "unhealthy"? → Позови на помощь! 🆘

### (Опционально) Шаг 8: Отправить локальные картинки на прод
```
На своей машине (не на сервере) запусти:

npm run sync:push

Это обновит папки /opt/photobooksgallery/backend/objects и /opt/photobooksgallery/uploads
на сервере и перезапустит backend.
```
```

### Шаг 9: Открой настоящий сайт
```
Открой браузер
Набери: https://photobooksgallery.am
Проверь что твои изменения видны
Всё работает? 🎉 ПОЗДРАВЛЯЮ! ТЫ СДЕЛАЛ ДЕПЛОЙ!
```

### Шаг 10: Отключись от сервера
```
В терминале набери:
exit

Терминал вернётся обратно (ты снова на своём компьютере)
✅ Готово!
```

---

## 🎯 ШПАРГАЛКА: КАКИЕ КНОПКИ И КОГДА ЖАТЬ

### 🌅 КАЖДОЕ УТРО (3 кнопки):
```
1. 🗄️ Запустить БД
2. 🛑 Остановить Backend
3. 🚀 Запустить DEV
```
**Время: 20 секунд**

### ✏️ ВО ВРЕМЯ РАБОТЫ (0 кнопок!):
```
Просто пиши код и сохраняй (Ctrl+S)
Всё обновляется автоматически!
```
**Кнопки жать НЕ НУЖНО!**

### 🧪 ПЕРЕД ДЕПЛОЕМ (3 кнопки):
```
1. Останови DEV (Ctrl+C)
2. 🔨 Собрать Docker
3. 🐳 Запустить Docker
4. Открой localhost:8080 в браузере
5. Всё работает? → Иди к ДЕПЛОЮ
6. Что-то не так? → docker compose down → 🚀 Запустить DEV (исправляй дальше)

### 🖼 СИНХРОНИЗАЦИЯ КАРТИНОК (по необходимости):
```
С прод в локаль:  npm run sync:pull
С локали на прод: npm run sync:push

Картинки лежат в:
- локально: ./backend/objects и ./uploads
- в Docker: примонтированы в /app/objects и /app/uploads
- на сервере: /opt/photobooksgallery/backend/objects и /opt/photobooksgallery/uploads
```
```
**Время: 2 минуты**

### 📤 ДЕПЛОЙ (терминал):
```
1. 💻 Git Status (посмотреть что менял)
2. git add .
3. git commit -m "что сделал"
4. git push
5. ssh root@46.173.29.247
6. cd /opt/photobooksgallery
7. git pull
8. docker compose build
9. docker compose up -d
10. docker ps (проверить)
11. Открыть photobooksgallery.am
12. exit (выйти из сервера)
```
**Время: 5 минут**

---

## 🚨 АВАРИЙНАЯ ОСТАНОВКА

### Если что-то пошло не так и нужно ВСЁ ОСТАНОВИТЬ:

```
Найди кнопку: 🛑 Остановить Backend
Нажми на неё

Открой терминал
Набери:
docker compose down

Ctrl+C (если что-то запущено в терминале)

✅ Всё остановлено!
```

### Потом можешь начать заново:
```
1. 🗄️ Запустить БД
2. 🚀 Запустить DEV
3. 🌐 Открыть Local
✅ Снова работаешь!
```

---

## 🔄 ТАБЛИЦА ПЕРЕКЛЮЧЕНИЙ (когда что использовать)

```
┌──────────────────┬─────────────────┬─────────────────────────────┐
│  ЧТО ДЕЛАЮ       │  ЧТО ЗАПУСКАЮ   │  ГДЕ ПРОВЕРЯЮ               │
├──────────────────┼─────────────────┼─────────────────────────────┤
│                  │                 │                             │
│ Пишу код         │ 🚀 DEV          │ localhost:3000              │
│ Исправляю ошибки │ 🚀 DEV          │ localhost:3000              │
│ Меняю дизайн     │ 🚀 DEV          │ localhost:3000              │
│ Экспериментирую  │ 🚀 DEV          │ localhost:3000              │
│                  │                 │                             │
│ Готов к деплою   │ 🐳 Docker       │ localhost:8080              │
│ Финальная        │ 🐳 Docker       │ localhost:8080              │
│ проверка         │                 │                             │
│                  │                 │                             │
│ Деплой на сервер │ ssh + команды   │ photobooksgallery.am        │
│                  │                 │                             │
└──────────────────┴─────────────────┴─────────────────────────────┘

КАК ПЕРЕКЛЮЧАТЬСЯ:

DEV → Docker (когда готов проверить):
  1. Ctrl+C в терминале DEV
  2. 🔨 Собрать Docker
  3. 🐳 Запустить Docker
  4. Открыть localhost:8080

Docker → DEV (когда нужно исправить):
  1. docker compose down
  2. 🚀 Запустить DEV
  3. 🌐 Открыть Local (localhost:3000)

DEV → Деплой (когда всё готово):
  1. Ctrl+C в терминале DEV
  2. 🔨 Собрать Docker
  3. 🐳 Запустить Docker
  4. Проверить localhost:8080
  5. Если ОК → git push → ssh → деплой

Docker → Деплой (если уже в Docker):
  1. Проверить localhost:8080
  2. Если ОК → git push → ssh → деплой
```

---

## 📞 КОГДА ЗВАТЬ НА ПОМОЩЬ

### Зови если:
- ❌ Сервер показывает "unhealthy" после деплоя
- ❌ Сайт photobooksgallery.am не открывается
- ❌ В терминале красный текст (ошибка) которую не понимаешь
- ❌ База данных не подключается (кнопка 🔍 Проверить БД показывает ошибку)
- ❌ Docker не собирается (build failed)

### НЕ зови если:
- ✅ Страница не обновляется → просто нажми Ctrl+S ещё раз
- ✅ Порт 5002 занят → нажми 🛑 Остановить Backend или docker compose down
- ✅ Забыл какую кнопку нажать → посмотри эту инструкцию снова
- ✅ Что-то не понравилось в Docker → docker compose down, потом 🚀 Запустить DEV

---

## ❓ ЧАСТЫЕ ВОПРОСЫ

### ❓ "Я в Docker, хочу исправить код. Что делать?"
```
Ответ:
1. docker compose down
2. 🚀 Запустить DEV
3. Исправь код
4. Ctrl+S (сохрани)
5. Проверь на localhost:3000
6. Когда готов снова проверить:
   - Ctrl+C
   - 🔨 Собрать Docker
   - 🐳 Запустить Docker
   - Проверь localhost:8080
```

### ❓ "Изменил код, но Docker не видит изменений!"
```
Ответ: Docker - это "снимок" (копия) кода.
Нужно пересобрать:

🔨 Собрать Docker (ОБЯЗАТЕЛЬНО!)
🐳 Запустить Docker

Теперь Docker видит новый код ✅
```

### ❓ "Порт 5002 занят, что делать?"
```
Ответ: Это значит Docker backend ещё запущен.

docker compose down
🚀 Запустить DEV

Теперь порт свободен ✅
```

### ❓ "На localhost:8080 вижу старую версию кода!"
```
Ответ: Ты забыл пересобрать Docker.

🔨 Собрать Docker (это обновит копию кода)
🐳 Запустить Docker

Теперь видишь новую версию ✅
```

### ❓ "Задеплоил на сервер, но изменений не вижу!"
```
Ответ: На сервере тоже нужно пересобрать.

ssh root@46.173.29.247
cd /opt/photobooksgallery
docker compose build
docker compose up -d
exit

Теперь сервер обновлён ✅

Если речь про КАРТИНКИ, а не про код:
```
npm run sync:push
```
Это скопирует локальные изображения на сервер и перезапустит backend.
```

### ❓ "Сколько раз в день нужно деплоить?"
```
Ответ: Редко! 1-2 раза в неделю.

Деплой делаешь только когда:
- ✅ Закончил большую фичу
- ✅ Исправил важную ошибку
- ✅ Готов показать изменения пользователям

НЕ деплой каждый час! Это лишнее.
```

### ❓ "Можно ли работать сразу в Docker, без DEV?"
```
Ответ: Можно, но НЕ НАДО!

DEV (localhost:3000):
✅ Быстро - изменения видны сразу
✅ Удобно - не нужно пересобирать
✅ Для разработки - 90% времени здесь

Docker (localhost:8080):
❌ Медленно - нужно пересобирать каждый раз
✅ Точно - работает как на сервере
✅ Для проверки - 10% времени перед деплоем
```

### ❓ "Что если я случайно удалил файл?"
```
Ответ: Git спасёт!

git checkout -- имя_файла.ts

Файл восстановится ✅

Или восстанови ВСЕ изменения:
git reset --hard
(⚠️ Осторожно! Удалит ВСЕ несохранённые изменения!)
```

### ❓ "Забыл сделать git commit перед деплоем!"
```
Ответ: Не страшно! Сделай сейчас:

git add .
git commit -m "Забыл закоммитить"
git push

Потом на сервере:
git pull
docker compose build
docker compose up -d

Всё исправлено ✅
```

---

## 🎓 ЗОЛОТЫЕ ПРАВИЛА (ЗАПОМНИ!)

### Правило 1: ПОСЛЕДОВАТЕЛЬНОСТЬ
```
Утро → Работа → Тест → Деплой
Нельзя пропускать шаги!
```

### Правило 2: НИКОГДА НЕ МЕНЯЙ КОД НА СЕРВЕРЕ
```
❌ НЕ подключайся к серверу и НЕ меняй файлы там!
✅ Меняй только на своём компьютере!
```

### Правило 3: СНАЧАЛА ЛОКАЛЬНО, ПОТОМ СЕРВЕР
```
Если локально не работает (localhost:8080)
→ НЕ ДЕПЛОЙ на сервер!
→ Сначала исправь локально!
```

### Правило 4: GIT - ТВОЙ ДРУГ
```
Каждый раз перед деплоем:
git add .
git commit -m "что сделал"
git push
```

### Правило 5: ПРОВЕРЯЙ ПОСЛЕ ДЕПЛОЯ
```
Задеплоил → открой photobooksgallery.am → проверь что работает
НЕ закрывай терминал пока не проверишь!
```

### Правило 6: ЧТО-ТО НЕ ПОНРАВИЛОСЬ В DOCKER? ВЕРНИСЬ К DEV!
```
❌ НЕ меняй код когда Docker запущен!
✅ Останови Docker → Запусти DEV → Исправь → Проверь снова

Формула:
docker compose down → 🚀 DEV → исправляй → Ctrl+C → 🔨 Docker → проверяй
```

### Правило 7: ПЕРЕСОБИРАЙ DOCKER ПОСЛЕ ИЗМЕНЕНИЙ
```
Изменил код → 🔨 Собрать Docker
Иначе Docker будет показывать СТАРУЮ версию!
```

---

## 📋 ЧЕКЛИСТ НА СТИКЕР (приклей на монитор!)

```
┌──────────────────────────────────┐
│   МОЯ ЕЖЕДНЕВНАЯ РАБОТА          │
├──────────────────────────────────┤
│                                  │
│ УТРО (каждый день):              │
│ ☐ 🗄️  БД                         │
│ ☐ 🛑  Остановить Backend         │
│ ☐ 🚀  DEV                        │
│ ☐ 🌐  Открыть Local              │
│                                  │
│ РАБОТА (весь день):              │
│ ☐ Пишу код                       │
│ ☐ Сохраняю (Ctrl+S)              │
│ ☐ Страница обновляется сама      │
│                                  │
│ ТЕСТ (перед деплоем):            │
│ ☐ Ctrl+C (останови DEV)          │
│ ☐ 🔨  Собрать Docker             │
│ ☐ 🐳  Запустить Docker           │
│ ☐ Проверить localhost:8080       │
│ ☐ Не понравилось?                │
│   → docker compose down          │
│   → 🚀 Запустить DEV (исправь)   │
│   → Повтори тест!                │
│                                  │
│ ДЕПЛОЙ (1-2 раза в неделю):      │
│ ☐ 💻  Git Status                 │
│ ☐ git add . + commit + push      │
│ ☐ ssh на сервер                  │
│ ☐ git pull                       │
│ ☐ docker compose build           │
│ ☐ docker compose up -d           │
│ ☐ Проверить сайт                 │
│ ☐ exit                           │
│                                  │
└──────────────────────────────────┘
```

---

## 🎮 ИГРОВОЙ РЕЖИМ: УРОВНИ СЛОЖНОСТИ

### 🟢 УРОВЕНЬ 1: НОВИЧОК
**Что умею:**
- Нажимать кнопки утром (БД, Остановить Backend, DEV)
- Менять код и сохранять (Ctrl+S)
- Видеть изменения в браузере

**Чего НЕ делаю:**
- Деплой (зову старшего)
- Docker (зову старшего)
- Git (зову старшего)

### 🟡 УРОВЕНЬ 2: ПРОДВИНУТЫЙ
**Что умею:**
- Всё из уровня 1
- Собирать Docker (🔨 Собрать Docker)
- Тестировать на localhost:8080
- Делать git commit

**Чего НЕ делаю:**
- Деплой на сервер (зову старшего)

### 🔴 УРОВЕНЬ 3: МАСТЕР
**Что умею:**
- Всё из уровня 2
- Деплой на сервер (ssh, git pull, docker compose)
- Проверка после деплоя
- Исправление ошибок на сервере

**Могу делать всё сам!** 🎉

---

## 💡 ПОДСКАЗКИ

### Подсказка 1: Как понять что DEV запустился?
```
Смотри в терминал внизу VS Code:
Если видишь эти строки - ✅ запустилось!

➜  Local:   http://localhost:3000/
➜  Network: use --host to expose
```

### Подсказка 2: Как понять что Docker собрался?
```
Смотри в терминал:
Если видишь эту строку - ✅ собралось!

Successfully built 1234567890ab
Successfully tagged photobooksgallery-backend:latest
```

### Подсказка 3: Как понять что деплой прошёл успешно?
```
1. docker ps показывает "healthy" у всех ✅
2. Сайт photobooksgallery.am открывается ✅
3. Твои изменения видны на сайте ✅
```

### Подсказка 4: Как быстро переключаться между DEV и Docker?
```
Если работаешь в DEV (localhost:3000):
→ Видишь изменения СРАЗУ после Ctrl+S
→ Быстро, удобно для разработки

Если работаешь в Docker (localhost:8080):
→ Нужно пересобирать каждый раз (docker compose build)
→ Медленно, но проверяешь "как на сервере"

ЗОЛОТОЕ ПРАВИЛО:
90% времени работай в DEV
10% времени проверяй в Docker (перед деплоем)
```

### Подсказка 5: Что делать если забыл остановить Docker?
```
Симптомы:
- Запустил DEV (🚀 Запустить DEV)
- В терминале пишет "Порт 5002 занят"

Решение:
docker compose down
🚀 Запустить DEV (заново)
✅ Должно заработать!
```

---

## 🎬 ЗАКЛЮЧЕНИЕ

**Запомни главное:**

1. **Утро:** 3 кнопки (БД → Остановить Backend → DEV)
2. **Работа:** Просто пиши код и сохраняй
3. **Тест:** Останови → Собери Docker → Запусти Docker → Проверь
4. **Не понравилось?** docker compose down → DEV → исправляй
5. **Деплой:** Git → SSH → git pull → build → up → проверь

**Вот и всё! Это не сложно! 🚀**

Если забыл что делать - открой эту инструкцию и читай по шагам!

**Удачи! 🎉**

---

## 📌 СУПЕР-КРАТКАЯ ШПАРГАЛКА (1 страница)

```
╔═══════════════════════════════════════════════════════════╗
║          ШПАРГАЛКА: РАБОТА С ПРОЕКТОМ                     ║
╠═══════════════════════════════════════════════════════════╣
║                                                           ║
║  🌅 УТРО (3 кнопки):                                      ║
║  1. 🗄️  БД                                                ║
║  2. 🛑  Остановить Backend                                ║
║  3. 🚀  DEV → открой localhost:3000                       ║
║                                                           ║
║  ✏️ РАБОТА (0 кнопок):                                    ║
║  - Пиши код → Ctrl+S → Страница обновляется сама          ║
║                                                           ║
║  🧪 ПРОВЕРКА ПЕРЕД ДЕПЛОЕМ:                               ║
║  1. Ctrl+C (останови DEV)                                 ║
║  2. 🔨 Собрать Docker                                     ║
║  3. 🐳 Запустить Docker                                   ║
║  4. Открой localhost:8080                                 ║
║  5. ✅ Всё хорошо? → Иди к ДЕПЛОЮ                         ║
║     ❌ Что-то не так? → docker compose down → 🚀 DEV      ║
║                                                           ║
║  🖼 СИНХРОНИЗАЦИЯ КАРТИНОК:                                ║
║  npm run sync:pull   (с прод в локаль)                    ║
║  npm run sync:push   (с локали на прод)                   ║
║  Файлы не в Git, живут в uploads/ и backend/objects       ║
║                                                           ║
║  📤 ДЕПЛОЙ (команды в терминале):                         ║
║  git add . && git commit -m "что сделал" && git push      ║
║  ssh root@46.173.29.247                                   ║
║  cd /opt/photobooksgallery                                ║
║  git pull                                                 ║
║  docker compose build                                     ║
║  docker compose up -d                                     ║
║  docker ps  (проверь: всё "healthy"?)                     ║
║  exit                                                     ║
║  Открой photobooksgallery.am → проверь!                   ║
║                                                           ║
║  🔄 ПЕРЕКЛЮЧЕНИЕ РЕЖИМОВ:                                 ║
║  DEV → Docker:   Ctrl+C → 🔨 → 🐳                         ║
║  Docker → DEV:   docker compose down → 🚀 → 🌐            ║
║                                                           ║
║  🚨 АВАРИЙНАЯ ОСТАНОВКА:                                  ║
║  docker compose down                                      ║
║  Ctrl+C                                                   ║
║                                                           ║
║  ⚠️ ЧАСТЫЕ ОШИБКИ:                                        ║
║  "Порт 5002 занят" → docker compose down → 🚀 DEV         ║
║  "Изменения не видны в Docker" → 🔨 Собрать Docker        ║
║  "Что-то не работает" → Открой эту инструкцию!            ║
║                                                           ║
║  🎯 ЗОЛОТОЕ ПРАВИЛО:                                      ║
║  90% времени → DEV (localhost:3000)                       ║
║  10% времени → Docker (localhost:8080)                    ║
║  1-2 раза в неделю → Деплой (photobooksgallery.am)        ║
║                                                           ║
╚═══════════════════════════════════════════════════════════╝
```

**💾 Сохрани эту страницу как картинку и держи перед глазами!**

---

## 🆘 ЭКСТРЕННАЯ ПОМОЩЬ

Если вообще ничего не понятно - начни с самого начала:

```
1. Закрой ВСЕ терминалы
2. docker compose down
3. 🗄️ Запустить БД
4. 🛑 Остановить Backend
5. 🚀 Запустить DEV
6. 🌐 Открыть Local

Если не видите КАРТИНКИ:
7. npm run sync:pull
8. docker compose restart backend frontend

✅ Теперь можешь работать!
```

**Дальше просто пиши код и сохраняй. Всё остальное - потом!**

---

**КОНЕЦ ИНСТРУКЦИИ 🎓**

*P.S. Если эта инструкция помогла - поставь ⭐ в Git!*
